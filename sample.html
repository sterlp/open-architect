<!DOCTYPE html>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
<body>
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="https://unpkg.com/@hpcc-js/wasm@0.3.11/dist/index.min.js"></script>
    <script src="https://unpkg.com/d3-graphviz@3.0.5/build/d3-graphviz.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">


    <nav class="navbar navbar-light bg-light">
        <div class="container-fluid">
            <a class="navbar-brand">TITLE</a>
            <div class="d-flex">
                <button id="root" class="btn btn-outline-primary me-2">Root</button>
                <button id="back" class="btn btn-outline-secondary">Back ></button>
            </div>
        </div>
    </nav>
    <div style="width: 100%;">
        <div id="graph" style="text-align: center; width: 100%;"></div>
    </div>
<script>

var data = {"root":"digraph {\n    \"org.sterl.testproject.simple\" [label=<\n <table><tr><td><b>simple</b></td></tr><tr><td>classes 3</td></tr></table> \n> \nshape=component fontcolor=white fillcolor=\"#343a40\" style=filled]\n    \"org.sterl.testproject.addresses\" [label=<\n <table><tr><td><b>addresses</b></td></tr><tr><td>classes 3</td></tr></table> \n> \nshape=component fontcolor=white fillcolor=\"#343a40\" style=filled]\n    \"org.sterl.testproject.persons\" [label=<\n <table><tr><td><b>persons</b></td></tr><tr><td>classes 7</td></tr></table> \n> \nshape=component fontcolor=white fillcolor=\"#343a40\" style=filled]\n    \"org.sterl.testproject.persons\" -> \"org.sterl.testproject.addresses\" [label=\"2\"]\n\n}\n","org.sterl.testproject.simple":"digraph {\n    \"org.sterl.testproject.simple.FooManager\" [label=\"FooManager\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.simple.FooManager\" -> \"org.sterl.testproject.simple.BarActivity\"\n\n    \"org.sterl.testproject.simple.SimpleEntityBE\" [label=\"SimpleEntityBE\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.simple.BarActivity\" [label=\"BarActivity\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.simple.BarActivity\" -> \"org.sterl.testproject.simple.SimpleEntityBE\"\n\n    \"org.sterl.testproject.simple.SimpleEntityBE\" [label=\"SimpleEntityBE\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.simple.BarActivity\" [label=\"BarActivity\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n}\n","org.sterl.testproject.addresses":"digraph {\n    \"org.sterl.testproject.addresses.activity.AddressManager\" [label=\"AddressManager\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.addresses.activity.AddressManager\" -> \"org.sterl.testproject.addresses.dao.AddressDao\"\n    \"org.sterl.testproject.addresses.activity.AddressManager\" -> \"org.sterl.testproject.addresses.model.AddressBE\"\n\n    \"org.sterl.testproject.addresses.dao.AddressDao\" [label=\"AddressDao\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.addresses.dao.AddressDao\" -> \"org.sterl.testproject.addresses.model.AddressBE\"\n\n    \"org.sterl.testproject.addresses.model.AddressBE\" [label=\"AddressBE\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.addresses.dao.AddressDao\" [label=\"AddressDao\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.addresses.model.AddressBE\" [label=\"AddressBE\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n}\n","org.sterl.testproject.persons":"digraph {\n    \"org.sterl.testproject.persons.activity.PersonManager\" [label=\"PersonManager\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.activity.PersonManager\" -> \"org.sterl.testproject.addresses.activity.AddressManager\"\n    \"org.sterl.testproject.persons.activity.PersonManager\" -> \"org.sterl.testproject.persons.dao.PersonDao\"\n    \"org.sterl.testproject.persons.activity.PersonManager\" -> \"org.sterl.testproject.persons.model.PersonBE\"\n\n    \"org.sterl.testproject.persons.dao.PersonDao\" [label=\"PersonDao\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.dao.PersonDao\" -> \"org.sterl.testproject.persons.model.PersonBE\"\n\n    \"org.sterl.testproject.persons.model.PersonBE\" [label=\"PersonBE\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.model.PersonBE\" -> \"org.sterl.testproject.addresses.model.AddressBE\"\n\n    \"org.sterl.testproject.persons.api.PersonBF\" [label=\"PersonBF\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.api.PersonBF\" -> \"org.sterl.testproject.persons.activity.PersonManager\"\n    \"org.sterl.testproject.persons.api.PersonBF\" -> \"org.sterl.testproject.persons.model.PersonBE\"\n\n    \"org.sterl.testproject.persons.api.PersonConverter\" [label=\"PersonConverter\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.api.PersonConverter\" -> \"org.sterl.testproject.addresses.model.AddressBE\"\n    \"org.sterl.testproject.persons.api.PersonConverter\" -> \"org.sterl.testproject.persons.model.PersonBE\"\n    \"org.sterl.testproject.persons.api.PersonConverter\" -> \"org.sterl.testproject.persons.api.Person\"\n    \"org.sterl.testproject.persons.api.PersonConverter\" -> \"org.sterl.testproject.persons.api.Adress\"\n\n    \"org.sterl.testproject.persons.api.Person\" [label=\"Person\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.api.Adress\" [label=\"Adress\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.addresses.activity.AddressManager\" [label=\"AddressManager\" shape=box fontcolor=white fillcolor=\"#007bff\" style=filled]\n    \"org.sterl.testproject.persons.api.Person\" [label=\"Person\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.model.PersonBE\" [label=\"PersonBE\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.activity.PersonManager\" [label=\"PersonManager\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.api.Adress\" [label=\"Adress\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.persons.dao.PersonDao\" [label=\"PersonDao\" shape=box fontcolor=white fillcolor=\"#28a745\" style=filled]\n    \"org.sterl.testproject.addresses.model.AddressBE\" [label=\"AddressBE\" shape=box fontcolor=white fillcolor=\"#007bff\" style=filled]\n}\n"};;

    var current;
    var graphHistory = [];

    var graphviz = d3.select("#graph")
                     .graphviz()
                     .transition(function() {
                          return d3.transition()
                            .ease(d3.easeLinear)
                            .duration(500);
                     });

    function startApp () {
        var nodes = d3.selectAll('.node');
        nodes.on("click", function(e) {
                var d = data[e.key];
                console.info('click', e.key, !!d);
                if (d) {
                    show(d);
                }
            }
        );
        console.info('started');
    };
    
    function show(value) {
        if (current) graphHistory.push(current);
        graphviz.renderDot(value, startApp);
        current = value;
    }

    d3.select("#root").on("click", function() {
        graphHistory.length = 0;
        current = null;
        show(data.root);
    });
    d3.select("#back").on("click", function() {
        var data = graphHistory.pop();
        console.info("pop", !!data);
        if (data) show(data);
    });
    show(data.root);
</script>
</body>
</html>